<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="mul.cam.e.dao.BoardDao">

    <select id="getBoardList" resultType="mul.cam.e.dto.BoardDto">
        SELECT b.id, b.user_id, b.title, b.content, u.user_name AS author, b.created_at
        FROM board b
                 JOIN user u ON b.user_id = u.user_id
        ORDER BY b.created_at DESC
    </select>

    <select id="getBoardByUserId" parameterType="int" resultType="mul.cam.e.dto.BoardDto">
        select * from board where user_id = #{userId}
        order by created_at desc
    </select>

    <select id="getBoard" parameterType="long" resultType="mul.cam.e.dto.BoardDto">
        SELECT b.id, b.user_id, b.title, b.content, u.user_name AS author, b.created_at
        FROM board b
                 JOIN user u ON b.user_id = u.user_id
        WHERE b.id = #{id}
    </select>

    <insert id="insertBoard" parameterType="mul.cam.e.dto.BoardDto">
        insert into board(user_id, title, content, author)
        values (#{userId}, #{title}, #{content}, #{author})
    </insert>

    <update id="updateBoard" parameterType="mul.cam.e.dto.BoardDto">
        update board
        set title = #{title}, content = #{content}, author = #{author}
        where id = #{id}
    </update>

    <delete id="deleteBoard" parameterType="long">
        delete from board where id = #{id}
    </delete>

</mapper>